<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemutar Lagu</title>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <style>
        .hide {
            display: none;
        }
    </style>
</head>
<body>

<img src="https://i.ibb.co/4V5TKxk/images-2-removebg-preview.png" alt="Icon Musik" id="togglePlaylist">

<div id="playlist" class="hide">
    <ul>
        <li><button class="song" data-src="https://kosred.com/a/mlibtj.mp3">Lagu 1</button></li>
        <li><button class="song" data-src="lagu2.mp3">Lagu 2</button></li>
        <li><button class="song" data-src="lagu3.mp3">Lagu 3</button></li>
    </ul>
</div>

<button id="playPause">Play</button>

<audio id="audioPlayer" controls>
    Your browser does not support the audio element.
</audio>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const togglePlaylist = document.getElementById("togglePlaylist");
        const playlist = document.getElementById("playlist");
        const playPauseBtn = document.getElementById("playPause");
        const audioPlayer = document.getElementById("audioPlayer");
        const songs = document.querySelectorAll(".song");
        let wavesurfer;

        togglePlaylist.addEventListener("click", function() {
            playlist.classList.toggle("hide");
        });

        songs.forEach(function(song) {
            song.addEventListener("click", function() {
                const songSrc = this.getAttribute("data-src");
                if (wavesurfer) {
                    wavesurfer.destroy();
                }
                wavesurfer = WaveSurfer.create({
                    container: "#audioPlayer",
                    backend: "WebAudio",
                    height: 100,
                    barWidth: 2,
                    cursorWidth: 1,
                    progressColor: "#2196F3",
                    responsive: true,
                });
                wavesurfer.load(songSrc);
                wavesurfer.on("ready", function() {
                    audioPlayer.src = songSrc;
                    audioPlayer.play();
                    playPauseBtn.textContent = "Pause";
                });
            });
        });

        playPauseBtn.addEventListener("click", function() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                playPauseBtn.textContent = "Pause";
            } else {
                audioPlayer.pause();
                playPauseBtn.textContent = "Play";
            }
        });
    });
</script>

</body>
</html>
